window.move=function(){typeof window.global=="undefined"&&(window.global=window);var modules={},_require=function a(b){if(++a.depth>20)throw new Error("Recursive module dependencies");b=b.replace(/^[\/.]+/g,"");var c=modules[b];if(!c)throw new Error('No module with id "'+b+'"');if(c.block){var d=c.block;c.block=null,d(c.exports,a,c)}a.depth--;return c.exports};_require.depth=0,modules["ast-mutators"]=module={id:"ast-mutators",exports:{},block:function(a,b,c,d,e){var f=b("./parser"),g=b("./process"),h=b("./util").array_to_hash;a.add_implicit_returns=function(b){var c=g.ast_walker(),d=g.MAP,e;e=function a(b){if(!b)return b;var c=b[0],d;if(c==="stat")b[0]="return";else{if(c==="defun"){b[0]="function";return["return",b]}if(c==="if")for(d=2;d<b.length;++d)b[d]=a(b[d]);else if(c==="block"){var e=b[1];e&&e.length!==0&&(e[e.length-1]=a(e[e.length-1]))}}return b};var f=function(b,f,g,h){g.length&&(g[g.length-1]=e(g[g.length-1]));return[this[0],b,f.slice(),d(g,c.walk),h]},h=c.with_walkers({defun:f,"function":f},function(){return c.walk(b)});return h},a.first_time_var_delc=function(b,c){function n(a,b,c,f){return[this[0],m(a),b,l(function(){e(b,m);return e(c,d.walk)}),f]}function m(a){return j.define(a)}function l(a){j=new i(j),j.vars=[];var b=j.body=a();if(j.vars.length){var c=b[0]==="toplevel"?b[1]:b,d=["var",e(j.vars,function(a){return[a]})];c.splice(0,0,d)}j=j.parent;return b}var d=g.ast_walker(),e=g.MAP,i=g.Scope,j=null,k=f.slice;c&&(j=new i,j.names=h(c));return l(function(){var a=d.with_walkers({defun:n,"function":n,"var":function(a){return[this[0],e(a,function(a){m(a[0]);var b=[a[0]];a.length>1&&(b[1]=d.walk(a[1]));return b})]},"import":function(a){e(a,function(a){m(a[0]),j.vars.push(a[0])})},"export":function(a){e(a,function(a){m(a[0]),j.vars.push(a[0])})},"const":function(a){e(a,function(a){m(a[0])})},assign:function(a,b,c){if(b[0]==="name"){var e=b[1],f=j.has(e);f||(j.vars.push(e),m(e))}return[this[0],a,d.walk(b),d.walk(c)]},"for-in":function(a,b,c,e){if(a)return[this[0],d.walk(a),d.walk(b),d.walk(c),d.walk(e)];j.has(b)||(j.vars.push(b),m(b));return[this[0],a,b,d.walk(c),d.walk(e)]}},function(){return d.walk(b)});return a})};var i=/^[_\$a-z][_\$\w\d]*$/i;a.named_lambda_assignments=function(b){var c=g.ast_walker(),d=g.MAP,e=c.with_walkers({"export":function(a){return[this[0],d(a,function(a){var b=[a[0]];a.length>1&&(a[1]&&a[1][0]==="function"&&!a[1][1]&&(a[1][1]=a[0]),b[1]=c.walk(a[1]));return b})]},assign:function(a,b,d){if(Array.isArray(d)&&d[0]==="function"&&!d[1])if(b[0]==="name")d[1]=b[1];else if(b[0]==="dot")d[1]=b[b.length-1];else if(b[0]==="sub"&&b[2][0]==="string"){var e=b[2][1];!f.KEYWORDS[e]&&!f.RESERVED_WORDS[e]&&i.test(e)&&(d[1]=e)}return[this[0],a,c.walk(b),c.walk(d)]}},function(){return c.walk(b)});return e},a.enforce_strict_eq_ops=function(b){var c=g.ast_walker(),d=g.MAP;return c.with_walkers({binary:function(a,b,d){a==="=="?a="===":a==="!="&&(a="!==");return[this[0],a,c.walk(b),c.walk(d)]}},function(){return c.walk(b)})},a.enable_keyword_arguments=function(b,c){var d=g.ast_walker(),e=g.MAP;typeof c!="object"&&(c={});var f=c.raw?"true":"_MoveKWArgsT";return d.with_walkers({"function":function(a,b,c,g){if(b.length){var h,i,j,k=["seq"],l=b[0],m=[null],n=["binary","&&",["binary","!==",["name",l],["name","null"]],["binary","&&",["binary","===",["unary-prefix","typeof",["name",l]],["string","object"]],["binary","===",["dot",["name",l],"__kw"],["name",f]]]];k.push(["assign",!0,["dot",["name","arguments"],"keywords"],["name",l]]);for(h=b.length;--h!==-1;)i=b[h],j=g&&g[i],k.push(["assign",!0,["name",i],["dot",["name",l],i]]),j&&m.push(["if",["binary","===",["name",i],["name","undefined"]],["stat",["assign",!0,["name",i],j]]]);m[0]=["stat",["binary","&&",n,k]],c=m.concat(c)}return[this[0],a,b,e(c,d.walk),g]},call:function(a,b){if(b.length===1&&b[0][0]==="object"){var c,g=b[0][1],h=[];for(var i=g.length;--i!==-1;)c=g[i],c[0]==="__kw"&&c[1]&&c[1][1]==="__Move_KWArgs__"&&h.push(i);if(h.length){while(h.length>1)delete g[h.pop()];g[h.pop()]=["__kw",["name",f]]}}return[this[0],d.walk(a),e(b,d.walk)]}},function(){return d.walk(b)})}}},modules.cli=module={id:"cli",exports:{},block:function(a,b,c,d,e){(function(){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;c=__move.runtime,d=c._MoveKWArgsT,e=c.Text,f=c.extend,g=c.create,h=c.print,i=c.repeat,j=c.after,k=c.JSON,l=b("fs"),m=b("./optparse"),n="Usage: move [options] [<filename>]",o=[["-h","--help","Display help"]],p={},q=[],r=function(b){b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,b=b.die),console.error((new m.OptionParser(o,n)).help());if(b!==undefined)return process.exit(b)},a.main=s=function(){t();if(p.help)return r();if(p.run){q.length||(console.error("At least one file must be specified"),r(1));return q.forEach(function(a){a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,a=a.filename);try{a=l.realpathSync(a)}catch(c){c.errno!==undefined&&(console.error(c.message),process.exit(1));throw c}return b(a)})}};return t=function(){var b,c;b=new m.OptionParser(o,n),p=c=b.parse(process.argv.slice(2)),c.run=!c.compile&&!c.ast;return q=c.arguments}})()}},modules.es5_array=module={id:"es5_array",exports:{},block:function(a,b,c,d,e){Array.isArray||(Array.isArray=function(b){return b instanceof Array||Object.prototype.toString.call(b)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(b,c){var d,e=this.length;for(d=+c||0;d<e;++d)if(this[d]===b)return d;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(b,c){var d=Math.min(this.length,+c||0);for(;d!==-1;--d)if(this[d]===b)return d;return-1}),Array.prototype.filter||(Array.prototype.filter=function(b,c){var d=[];for(var e=0;e<this.length;e++)b.call(c,this[e])&&d.push(this[e]);return d}),Array.prototype.forEach||(Array.prototype.forEach=function(b,c){var d=this.length>>>0;for(var e=0;e<d;++e)e in this&&b.call(c,this[e],e,this)}),Array.prototype.every||(Array.prototype.every=function(b,c){var d=this.length>>>0;for(var e=0;e<d;++e)if(e in this&&!b.call(c,this[e],e,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(b,c){var d=this.length>>>0;for(var e=0;e<d;++e)if(e in this&&b.call(c,this[e],e,this))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(b,c){var d=this.length>>>0,e=Array(d);for(var f=0;f<d;++f)e[f]=b.call(c,this[f],f,this);return e}),Array.prototype.reduce||(Array.prototype.reduce=function(b){var c=this.length>>>0,d=0,e;if(c===0&&arguments.length===1)throw new TypeError;if(arguments.length>=2)e=arguments[1];else do{if(d in this){e=this[d++];break}if(++d>=c)throw new TypeError}while(!0);for(;d<c;d++)d in this&&(e=b.call(null,e,this[d],d,this));return e}),Array.prototype.unshift||(Array.prototype.unshift=function(){this.reverse();var a=arguments.length;while(a--)this.push(arguments[a]);this.reverse();return this.length})}},modules.es5_date=module={id:"es5_date",exports:{},block:function(a,b,c,d,e){Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.getTimezoneOffset||(Date.prototype.getTimezoneOffset=function(){if(this._timezoneOffsetStd===undefined){var b=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0),c=b.toGMTString(),d=new Date(c.substring(0,c.lastIndexOf(" ")-1));this._timezoneOffsetStd=(d-b)/6e4}return this._timezoneOffsetStd})}},modules.es5_json=module={id:"es5_json",exports:{},block:function(exports,require,module,__filename,__dirname){var JSON=global.JSON;if(typeof JSON!="object"||typeof JSON.stringify!="function"||typeof JSON.parse!="function")JSON=global.JSON={},function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g;return e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g;return e}}function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(b&&typeof b!="function"&&(typeof b!="object"||typeof b.length!="number"))throw new Error("JSON.stringify");return str("",{"":a})}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})}()}},modules.es5_object=module={id:"es5_object",exports:{},block:function(a,b,c,d,e){var f=Array.prototype.slice.call;Object.create||(Object.create=function(b,c){var d=function(){c&&Object.defineProperties&&Object.defineProperties(this,c)};d.prototype=b;return new d}),Object.keys||(Object.keys=function a(b){var a=[];for(var c in b)a.push(c);return a}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(){return Object.keys.apply(this,f(arguments))}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(b,c){if(b.hasOwnProperty(c))return{configurable:!0,enumerable:!0,value:b[c],writable:!0}}),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){return a in this}),Object.defineProperty||Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.defineProperty=function(a,b,c){if(typeof c=="object")if(c.hasOwnProperty("value")){!a.__lookupGetter__(b)&&!a.__lookupSetter__(b)&&(a[b]=c.value);if(c.hasOwnProperty("get")||c.hasOwnProperty("set"))throw new TypeError("Object doesn't support this action")}else typeof c.get=="function"&&a.__defineGetter__(b,c.get),typeof c.set=="function"&&a.__defineSetter__(b,c.set);return a}),!Object.defineProperties&&Object.defineProperty&&(Object.defineProperties=function(a,b){for(var c in b)Object.defineProperty(a,c,b[c])})}},modules.es5_string=module={id:"es5_string",exports:{},block:function(a,b,c,d,e){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^(?:\s|\u00A0)+/,"").replace(/(?:\s|\u00A0)+$/,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^(?:\s|\u00A0)+/,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/(?:\s|\u00A0)+$/,"")})}},modules.index=module={id:"index",exports:{},block:function(exports,require,module,__filename,__dirname){var fs;try{fs=require("fs")}catch(e){}var http;try{http=require("http")}catch(e){}var parser=require("./parser"),processor=require("./process"),astMutators=require("./ast-mutators");require("./runtime_string"),exports.preprocessors={},exports.compile=function(b,c){var d={source:null,filename:"?",globals:[],ignorePragmas:!1,implicitReturns:!0,automaticVarDeclarations:!0,namedLambdas:!0,strictEqualityOperators:!0,keywordArguments:!0,mangleNames:!1,optimizationLevel:0,codegen:!0,outputFormatting:{indent_level:2},detailedOutput:!1,strict:!0,raw:!1};typeof b=="object"&&(c=b,b=c.source);if(typeof c=="object")for(var e in c)d[e]=c[e];d.strictMode=!1,d.embedTokens=!1;if(!d.ignorePragmas){var f=/^\s*(?:true|y.*|on|1)\s*$/i;b.forEachMatch(/^#\s*pragma\s+(\w+)\s(.+)/gm,function(a){var b=a[1],c=a[2];switch(b){case"strict":d.strict=f.test(c);break;case"enable":if(c==="ehtml")Array.isArray(d.preprocess)?d.preprocess.indexOf("ehtml")===-1&&d.preprocess.push("ehtml"):d.preprocess=["ehtml"];else throw new Error('Unknown value "'+c+'" for "enable" pragma');break;case"disable":if(c==="ehtml")Array.isArray(d.preprocess)&&(c=d.preprocess.indexOf("ehtml"))!==-1&&d.preprocess.splice(c,1);else throw new Error('Unknown value "'+c+'" for "disable" pragma');break;default:throw new Error('Unknown pragma directive "'+b+'"')}})}if(d.preprocess){if(!Array.isArray(d.preprocess))throw Error('"preprocess" option must have an array value');d.preprocess.forEach(function(a){preprocessor=require("./preprocessors/"+a),b=preprocessor.process(b,d)})}b+="\n",d.raw||(b=wrapInRuntime(b,d));try{var g=parser.parse(b,d)}catch(h){if(h.name==="JS_Parse_Error"){h.name="SyntaxError";var i="";for(var j=0;j<h.col;++j)i+=" ";h.diagnostic=h.name+": "+h.message+"\n"+d.filename+":"+h.line+":"+h.col+"\n"+b.split(/[\r\n]/)[h.line]+"\n"+i+"⬆",h.stack&&(h.stack=h.diagnostic+"\n"+h.stack.split(/[\r\n]/).slice(1).join("\n"))}throw h}d.implicitReturns&&(g=astMutators.add_implicit_returns(g,d));if(d.automaticVarDeclarations){var k=["global","process","require","window","__filename","__dirname","module"];Array.isArray(d.globals)&&d.globals.length&&(k=k.concat(d.globals)),g=astMutators.first_time_var_delc(g,k,d)}d.namedLambdas&&(g=astMutators.named_lambda_assignments(g,d)),d.strictEqualityOperators&&(g=astMutators.enforce_strict_eq_ops(g,d)),d.keywordArguments&&(g=astMutators.enable_keyword_arguments(g,d)),d.mangleNames&&(g=processor.ast_mangle(g)),d.optimizationLevel&&(g=processor.ast_squeeze(g)),typeof d.optimizationLevel=="number"&&d.optimizationLevel>1&&(g=processor.ast_squeeze_more(g));if(!d.codegen)return g;var l=processor.gen_code(g,d.outputFormatting);d.strict&&(d.raw?l='"use strict";'+l:l=l.replace(/\(function\s*\(\)\s*\{/,'(function(){"use strict";')),exports.debug&&typeof console!="undefined"&&console.log((c.filename||"<move code>")+" -> \n"+l);return d.detailedOutput?{ast:g,code:l}:l},exports.compileFileSync=function(b,c){if(!fs)throw new Error("File system access is not supported");typeof c=="object"&&!c.filename?c.filename=b:c={filename:b};return exports.compile(fs.readFileSync(b,"utf8"),c)},exports.eval=function(a,b){if(!b||typeof b!="object")b={};var c=exports.compile(a,b);return function(){var a=exports;return evalFunc(c.code!==undefined?c.code:c,String(b.filename||"<input>"))}()};var evalFunc;try{evalFunc=require("vm").runInThisContext}catch(e){evalFunc=eval}typeof window!="undefined"&&window?exports.compileURL=function(b,c,d){var e=parseKWArgs(arguments,[["url"],["options"],["callback"]]);typeof e.options=="function"&&(e.callback=e.options,e.options={});var f=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;f.open("GET",e.url,!0),"overrideMimeType"in f&&f.overrideMimeType("text/plain"),f.onreadystatechange=function(){if(f.readyState===4){var a,c,d=b.indexOf("://")!==-1?b.match(/^http/):document.location.protocol.match(/^http/);if(d&&String(f.status).charAt(0)==="2"||!d&&f.status===0)try{a=move.compile(f.responseText,e.options)}catch(g){c=g}else f.status&&f.statusText?(c=new Error("HTTP request error: "+f.status+" "+f.statusText),c.httpStatus=f.status):c=new Error("Unspecified HTTP request error");if(typeof e.callback=="function")e.callback(c,a);else if(c)throw c}};return f.send(null)}:!http,exports.version=function(){exports.version._v===undefined&&(exports.version._v=JSON.parse(fs.readFileSync(__dirname+"/../package.json","utf8")).version);return exports.version._v};var parseKWArgs=function(b,c){var d=b[0],e,f,g,h;if(typeof d=="object"&&d.__kw===_MoveKWArgsT){e=d;for(h=0;h<c.length;++h)f=c[h][0],e[f]===undefined&&(g=c[h][1])!==undefined&&(e[f]=g)}else{e={};for(h=0;h<c.length;++h)f=c[h][0],g=b[h],g===undefined&&(g=c[h][1]),g!==undefined&&(e[f]=g)}return e},wrapInRuntime=function(b,c){var d="(function () { ";c.automaticVarDeclarations||(d+="var "),d+="Move = __move.runtime";var e=Object.keys(exports.runtime);e.length&&(d+=", "+e.map(function(a){return a+" = Move."+a}).join(","));return d+"; "+b+"})()"};require.extensions&&(require.extensions[".mv"]=require.extensions[".move"]=function(b,c){content=exports.compileFileSync(c,{optimizationLevel:0});return b._compile(content,c)});var _MoveKWArgsT=function a(b){b.__kw=a;return b};global.__move=exports,exports.runtime={_MoveKWArgsT:_MoveKWArgsT},exports.runtime=require("./runtime")}},modules.optparse=module={id:"optparse",exports:{},block:function(a,b,c,d,e){(function(){var b,c,d,e,f,g,h,i;a.OptionParser=e=function(){function a(a,b){this.banner=b,this.rules=h(a)}a.prototype.parse=function(a){var c,d,e,g,h,j,k,l,m,n,o;h={arguments:[],literals:[]},a=i(a);for(d=0,m=a.length;d<m;d++){c=a[d];if(c==="--"){h.literals=a.slice(d+1);break}e=!!c.match(b)||!!c.match(f),g=!1,o=this.rules;for(l=0,n=o.length;l<n;l++){j=o[l];if(j.shortFlag===c||j.longFlag===c){k=j.hasArgument?a[d+=1]:!0,h[j.name]=j.isList?(h[j.name]||[]).concat(k):k,g=!0;break}}if(e&&!g)throw new Error("unrecognized option: "+c);if(!e){h.arguments=a.slice(d);break}}return h},a.prototype.help=function(){var a,b,c,d,e,f,g;b=[],this.banner&&b.unshift(""+this.banner+"\n"),g=this.rules;for(e=0,f=g.length;e<f;e++)c=g[e],d=15-c.longFlag.length,d=d>0?Array(d+1).join(" "):"",a=c.shortFlag?c.shortFlag+", ":"    ",b.push("  "+a+c.longFlag+d+c.description);return b.join("\n")+"\n"};return a}(),b=/^(--\w[\w\-]+)/,f=/^(-\w)/,c=/^-(\w{2,})/,d=/\[(\w+(\*?))\]/,h=function(a){var b,c,d,e;e=[];for(c=0,d=a.length;c<d;c++)b=a[c],b.length<3&&b.unshift(null),e.push(g.apply(null,b));return e},g=function(a,c,e,f){var g;f==null&&(f={}),g=c.match(d),c=c.match(b)[1];return{name:c.substr(2),shortFlag:a,longFlag:c,description:e,hasArgument:!!g&&!!g[1],isList:!!g&&!!g[2]}},i=function(a){var b,d,e,f,g,h,i,j,k;a=a.slice(0),f=[];for(g=0,i=a.length;g<i;g++){b=a[g];if(e=b.match(c)){k=e[1].split("");for(h=0,j=k.length;h<j;h++)d=k[h],f.push("-"+d)}else f.push(b)}return f}}).call(this)}},modules.parser=module={id:"parser",exports:{},block:function(a,b,c,d,e){function P(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function O(a,b){for(var c=b.length;--c>=0;)if(b[c]===a)return!0;return!1}function N(a){return a.split("")}function M(a,b){return Array.prototype.slice.call(a,b==null?0:b)}function L(a){var b={};for(var c=0;c<a.length;++c)b[a[c]]=!0;return b}function K(a){a instanceof Function&&(a=a());for(var b=1,c=arguments.length;--c>0;++b)arguments[b]();return a}function J(a){var b=M(arguments,1);return function(){return a.apply(this,b.concat(M(arguments)))}}function I(a,b,c){function br(a){try{++e.in_loop;return a()}finally{--e.in_loop}}function bq(a){arguments.length==0&&(a=!0);var b=bp();if(a&&f("punc",",")){h();return s("seq",b,bq())}return b}function bp(){var a=bn(),b=e.token.value;if(f("operator")&&P(D,b)){if(bo(a)){h();return s("assign",D[b],a,bp())}j("Invalid assignment")}return a}function bo(a){switch(a[0]){case"dot":case"sub":return!0;case"name":return a[1]!="this"}}function bn(){var a=bm();if(f("operator","?")){h();var b=bq(!1);o(":");return s("conditional",a,b,bq(!1))}return a}function bm(){return bl(ba(!0),0)}function bl(a,b){var c=f("operator")?e.token.value:null,d=c!=null?E[c]:null;if(d!=null&&d>b){h();var g=bl(ba(!0),d);return bl(s("binary",c,a,g),b)}return a}function bk(a,b,c){(b=="++"||b=="--")&&!bo(c)&&j("Invalid use of "+b+" operator");return s(a,b,c)}function bj(a,b){if(f("punc",".")){h();return bj(s("dot",a,bh()),b)}if(f("punc","[")){h();var c=null,i=null;f("punc",":")?h():c=K(bq,J(p,"]",":"));if(e.prev.value===":"){f("punc","]")?h():i=K(bq,J(o,"]"));return bi(a,c,i,b)}return bj(s("sub",a,c),b)}if(b&&f("punc","(")){h();return bj(s("call",a,bb(")")),!0)}if(b&&d.keywordArguments&&f("punc","{")){h();var j;f("operator","&")?(h(),j=bq(!1),o("}"),d.raw||(j=["call",["name","_MoveKWArgsT"],[j]])):(j=be(),j[1].push(["__kw",["name","__Move_KWArgs__"]]));var k=a;return bj(s("call",k,[j]),!0)}if(b&&f("operator")&&P(C,e.token.value))return K(J(bk,"unary-postfix",e.token.value,a),h);if(b&&!e.token.nlb&&!f("eof")&&!f("punc")&&!f("operator")&&(e.token.type!=="keyword"||e.token.value==="function")){var l=[],m=!0,n;while(!f("punc",";")){if(m)m=!1;else if(f("punc",",")&&!g().nlb)h();else{n=!0;break}l.push(bq(!1))}!n&&!f("punc",";")&&h();if(e.token.nlb||f("punc",";"))return s("call",a,l);return bj(s("call",a,l),!0)}return a}function bi(a,b,c,d){if(f("operator","=")){h();var e=v();return bj(["call",["dot",a,"_move_setSlice"],[b||["num","0"],c||["name","undefined"],e[1]||["name","undefined"]]],d)}var g=[b||["num","0"]];c&&g.push(c);return bj(["call",["dot",a,"slice"],g],d)}function bh(){switch(e.token.type){case"name":case"operator":case"keyword":case"atom":return K(e.token.value,h);default:l()}}function bg(){switch(e.token.type){case"num":case"string":return K(e.token.value,h)}return bh()}function bf(){var a=!0,c,d,g=[],i={};while(!f("punc",")")){a?a=!1:o(",");if(!b&&f("punc",")"))break;c=e.token.type,d=bg(),g.push(d),f("punc",":")&&(h(),i[d]=bq(!1))}h();return{names:g,values:i}}function be(){var a=!0,c=[];while(!f("punc","}")){a?a=!1:o(",");if(!b&&f("punc","}"))break;var d=e.token.type,g=bg();d!="name"||g!="get"&&g!="set"||!!f("punc",":")?(o(":"),c.push([g,bq(!1)])):c.push([bh(),Q(!1),g])}h();return s("object",c)}function bd(){return s("array",bb("]",!b,!0))}function bc(a,b,c,d){var e=!0,g=[];d||(d=0x10000000000000000);try{while(!f("punc",a)&&--d){e?e=!1:o(",");if(b&&f("punc",a))break;f("punc",",")&&c?g.push(["atom","undefined"]):g.push(bq(!1))}h()}catch(i){if(String(i.message).indexOf("Unexpected token")!==0)throw i}return g}function bb(a,b,c){var d=!0,e=[];while(!f("punc",a)){d?d=!1:o(",");if(b&&f("punc",a))break;f("punc",",")&&c?e.push(["atom","undefined"]):e.push(bq(!1))}h();return e}function ba(a){if(f("operator","new")){h();return _()}if(f("operator")&&P(B,e.token.value))return bk("unary-prefix",K(e.token.value,h),ba(a));if(f("punc")){switch(e.token.value){case"(":h();return bj(K(bq,J(o,")")),a);case"[":h();return bj(bd(),a);case"{":h();return bj(be(),a)}l()}if(f("keyword","function")){h();return bj(Q(!1),a)}if(P(G,e.token.type)){var b=e.token.type=="regexp"?s("regexp",e.token.value[0],e.token.value[1]):s(e.token.type,e.token.value);return bj(K(b,h),a)}l()}function _(){var a=ba(!1),b;f("punc","(")?(h(),b=bb(")")):b=[];return bj(s("new",a,b),!0)}function $(){return s("export",W())}function Z(){return s("import",W())}function Y(){return s("const",W())}function X(){return s("var",W())}function W(){var a=[];for(;;){f("name")||l();var b=e.token.value;h(),f("operator","=")?(h(),a.push([b,bq(!1)])):a.push([b]);if(!f("punc",","))break;h()}return a}function V(){var a=T(),b,c;if(f("keyword","catch")){h(),o("("),f("name")||j("Name expected");var d=e.token.value;h(),o(")"),b=[d,T()]}f("keyword","finally")&&(h(),c=T()),!b&&!c&&j("Missing catch/finally blocks");return s("try",a,b,c)}function T(){o("{");var a=[];while(!f("punc","}"))f("eof")&&l(),a.push(v());h();return a}function S(){var a=t(),b=v(),c;f("keyword","else")&&(h(),c=v());return s("if",a,b,c)}function R(a){var b=f("name")?K(e.token.value,h):null;a&&!b&&!e.in_function&&l(),o("(");var c=bf();return s(a?"defun":"function",b,c.names,function(){++e.in_function;var a=e.in_loop;e.in_loop=0;var b=T();--e.in_function,e.in_loop=a;return b}(),c.values)}function N(){o("(");var a=!d.automaticVarDeclarations&&f("keyword","var");a&&h();if(f("name")&&y(g(),"operator","in")){var b=e.token.value;h(),h();var c=bq();o(")");return s("for-in",a,b,c,br(v))}var i=f("punc",";")?null:a?X():bq();o(";");var j=f("punc",";")?null:bq();o(";");var k=f("punc",")")?null:bq();o(")");return s("for",i,j,k,br(v))}function L(a){var b=f("name")?e.token.value:null;b!=null?(h(),O(b,e.labels)||j("Label "+b+" without matching loop or statement")):e.in_loop==0&&j(a+" not inside a loop or switch"),r();return s(a,b)}function I(){return s("stat",K(bq,r))}function z(a){e.labels.push(a);var c=e.token,d=v();b&&!P(F,d[0])&&l(c),e.labels.pop();return s("label",a,d)}function w(){f("operator","/")&&(e.peeked=null,e.token=e.input(!0)),d.automaticVarDeclarations&&e.token.type==="keyword"&&e.token.value==="var"&&l();switch(e.token.type){case"num":case"string":case"regexp":case"operator":case"atom":return I();case"name":return y(g(),"punc",":")?z(K(e.token.value,h,h)):I();case"punc":switch(e.token.value){case"{":return s("block",T());case"[":case"(":return I();case";":h();return s("block");default:l()};case"keyword":switch(K(e.token.value,h)){case"break":return L("break");case"continue":return L("continue");case"debugger":r();return s("debugger");case"do":return function(a){m("keyword","while");return s("do",K(t,r),a)}(br(v));case"for":return N();case"function":return Q(!0);case"if":return S();case"return":e.in_function==0&&j("'return' outside of function");return s("return",f("punc",";")?(h(),null):q()?null:K(bq,r));case"switch":return s("switch",t(),U());case"throw":return s("throw",K(bq,r));case"try":return V();case"var":return K(X,r);case"const":return K(Y,r);case"while":return s("while",t(),br(v));case"with":j("'with' statement not allowed");case"import":return K(Z,r);case"export":return K($,r);default:l()}}}function u(a,b,c){return a instanceof H?a:new H(a,b,c)}function t(){o("(");var a=bq();o(")");return a}function s(){return M(arguments)}function r(){f("punc",";")?h():q()||l()}function q(){return!b&&(e.token.nlb||f("eof")||f("punc","}"))}function p(a,b){return n("punc",a,"punc",b)}function o(a){return m("punc",a)}function n(a,b,c,d){if(f(a,b)||f(c,d))return h();k(e.token,"Unexpected token: "+e.token.type+", expected "+a+" or "+c)}function m(a,b){if(f(a,b))return h();k(e.token,"Unexpected token: "+e.token.type+", expected "+a)}function l(a){a==null&&(a=e.token),k(a,"Unexpected token: "+a.type+" ("+a.value+")")}function k(a,b){j(b,a.line,a.col)}function j(a,b,c,d){var f=e.input.context();x(a,b!=null?b:f.tokline,c!=null?c:f.tokcol,d!=null?d:f.tokpos)}function i(){return e.prev}function h(){e.prev=e.token,e.peeked?(e.token=e.peeked,e.peeked=null):e.token=e.input();return e.token}function g(){return e.peeked||(e.peeked=e.input())}function f(a,b){return y(e.token,a,b)}var d={};typeof b=="object"&&(d=b,b=d.strictMode,c=d.embedTokens);var e={input:typeof a=="string"?A(a,d):a,token:null,prev:null,peeked:null,in_function:0,in_loop:0,labels:[]};e.token=h();var v=c?function(){var a=e.token,b=w.apply(this,arguments);b[0]=u(b[0],a,i());return b}:w,Q=c?function(){var a=i(),b=R.apply(this,arguments);b[0]=u(b[0],a,i());return b}:R,U=J(br,function(){o("{");var a=[],b=null;while(!f("punc","}"))f("eof")&&l(),f("keyword","case")?(h(),b=[],a.push([bq(),b]),o(":")):f("keyword","default")?(h(),o(":"),b=[],a.push([null,b])):(b||l(),b.push(v()));h();return a});return s("toplevel",function(a){while(!f("eof"))a.push(v());return a}([]))}function H(a,b,c){this.name=a,this.start=b,this.end=c}function A(a,b){function O(a){if(c.queued_tokens.length)return c.queued_tokens.shift();if(a)return I();w(),l();var b=d();if(!b)return m("eof");if(u(b))return B();if(b==='"'||b==="'")return F();if(P(q,b))return m("punc",e());if(b===".")return L();if(b==="/")return K();if(b==="#"){var f=c.regex_allowed;c.comments_before.push(G()),c.regex_allowed=f;return O()}if(b==="^"){e(),b=d(),b==="{"&&(c.queued_tokens.push(m("punc","(")),c.queued_tokens.push(m("punc",")")));return m("keyword","function")}if(P(j,b))return J();if(b==="@"){e();var g=M(),h=m("name","this");h.nlb=g.nlb,g.nlb=!1,c.queued_tokens.push(m("punc",".")),c.queued_tokens.push(g);return h}if(t(b))return M();A("Unexpected character '"+b+"'")}function N(a,b){try{return b()}catch(c){if(c===z)A(a);else throw c}}function M(){var a=y(t);return P(f,a)?P(n,a)?m("operator",a):P(i,a)?m("atom",a):m("keyword",a):m("name",a)}function L(){e();return u(d())?B("."):m("punc",".")}function K(){e();var a=c.regex_allowed;switch(d()){case"/":c.comments_before.push(G()),c.regex_allowed=a;return O();case"*":c.comments_before.push(H()),c.regex_allowed=a;return O()}return c.regex_allowed?I():J("/")}function J(a){function b(a){if(!d())return a;var c=a+d();if(P(n,c)){e();return b(c)}return a}return m("operator",b(a||e()))}function I(){return N("Unterminated regular expression",function(){var a=!1,b="",c,d=!1;while(c=e(!0))if(a)b+="\\"+c,a=!1;else if(c=="[")d=!0,b+=c;else if(c=="]"&&d)d=!1,b+=c;else{if(c=="/"&&!d)break;c=="\\"?a=!0:b+=c}var f=y(function(a){return P(r,a)});return m("regexp",[b,f])})}function H(){e();return N("Unterminated multiline comment",function(){var a=k("*/",!0),b=c.text.substring(c.pos,a),d=m("comment2",b,!0);c.pos=a+2,c.line+=b.split("\n").length-1,c.newline_before=b.indexOf("\n")>=0;return d})}function G(){e();var a=k("\n"),b;a==-1?(b=c.text.substr(c.pos),c.pos=c.text.length):(b=c.text.substring(c.pos,a),c.pos=a);return m("comment1",b,!0)}function F(){return N("Unterminated string constant",function(){var a=e(),b="";for(;;){var c=e(!0);if(c=="\\")c=D();else if(c==a)break;b+=c}return m("string",b)})}function E(a){var b=0;for(;a>0;--a){var c=parseInt(e(!0),16);isNaN(c)&&A("Invalid hex-character pattern in string"),b=b<<4|c}return b}function D(){var a=e(!0);switch(a){case"n":return"\n";case"r":return"\r";case"t":return"\t";case"b":return"\b";case"v":return"";case"f":return"\f";case"0":return" ";case"x":return String.fromCharCode(E(2));case"u":return String.fromCharCode(E(4));default:return a}}function B(a){var b=!1,c=!1,d=!1,e=a==".",f=y(function(f,g){if(f=="x"||f=="X"){if(d)return!1;return d=!0}if(!d&&(f=="E"||f=="e")){if(b)return!1;return b=c=!0}if(f=="-"){if(c||g==0&&!a)return!0;return!1}if(f=="+")return c;c=!1;if(f=="."){if(!e)return e=!0;return!1}return s(f)});a&&(f=a+f);var g=v(f);if(!isNaN(g))return m("num",g);A("Invalid syntax: "+f)}function A(a){x(a,c.tokline,c.tokcol,c.tokpos)}function y(a){var b="",c=d(),f=0;while(c&&a(c,f++))b+=e(),c=d();return b}function w(){while(P(o,d()))e()}function m(a,b,d){c.regex_allowed=a=="operator"&&!P(C,b)||a==="keyword"&&P(h,b)||a==="punc"&&P(p,b)||a==="name";var e={type:a,value:b,line:c.tokline,col:c.tokcol,pos:c.tokpos,nlb:c.newline_before};d||(e.comments_before=c.comments_before,c.comments_before=[]),c.newline_before=!1,c.prev_token=e;return e}function l(){c.tokline=c.line,c.tokcol=c.col,c.tokpos=c.pos}function k(a,b){var d=c.text.indexOf(a,c.pos);if(b&&d==-1)throw z;return d}function g(){return!c.peek()}function e(a){var b=c.text.charAt(c.pos++);if(a&&!b)throw z;b=="\n"?(c.newline_before=!0,++c.line,c.col=0):++c.col;return b}function d(){return c.text.charAt(c.pos)}typeof b!="object"&&(b={});var c={text:a.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],queued_tokens:[]};O.context=function(a){a&&(c=a);return c};return O}function y(a,b,c){return a.type==b&&(c==null||a.value==c)}function x(a,b,c,d){throw new w(a,b,c,d)}function w(a,b,c,d){this.name="JS_Parse_Error",this.message=a,this.line=b,this.col=c,this.pos=d;try{({})()}catch(e){this.stack=this.message,e&&e.stack&&(this.stack+="\n"+e.stack.split(/[\r\n]/).slice(3).join("\n"))}}function v(a){if(k.test(a))return parseInt(a.substr(2),16);if(l.test(a))return parseInt(a.substr(1),8);if(m.test(a))return parseFloat(a)}function u(a){a=a.charCodeAt(0);return a>=48&&a<=57}function t(a){return s(a)||a=="$"||a=="_"}function s(a){a=a.charCodeAt(0);return a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122}var f=L(["break","case","catch","const","continue","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","throw","try","typeof","var","void","while","with","import","export","xor"]);a.KEYWORDS=f;var g=L(["abstract","boolean","byte","char","class","debugger","double","enum","extends","final","float","goto","implements","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"]);a.RESERVED_WORDS=g;var h=L(["return","new","delete","throw","else","case"]),i=L(["false","null","true","undefined"]),j=L(N("+-*&%=<>!?|~")),k=/^0x[0-9a-f]+$/i,l=/^0[0-7]+$/,m=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,n=L(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","%=","|=","&=","&&","||","xor"]),o=L(N(" \n\r\t")),p=L(N("[{}(,.;:")),q=L(N("[]{}(),;:")),r=L(N("gmsiy"));w.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")"+"\n\n"+this.stack};var z={},B=L(["typeof","void","delete","--","++","!","~","-","+"]),C=L(["--","++"]),D=function(a,b,c){while(c<a.length)b[a[c]]=a[c].substr(0,a[c].length-1),c++;return b}(["+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","xor=","&="],{"=":!0},0),E=function(a,b){for(var c=0,d=1;c<a.length;++c,++d){var e=a[c];for(var f=0;f<e.length;++f)b[e[f]]=d}return b}([["||"],["&&"],["|"],["xor"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),F=L(["for","do","while","switch"]),G=L(["atom","num","string","regexp","name"]);H.prototype.toString=function(){return this.name},a.tokenizer=A,a.parse=I,a.slice=M,a.curry=J,a.member=O,a.array_to_hash=L,a.PRECEDENCE=E,a.KEYWORDS_ATOM=i,a.RESERVED_WORDS=g,a.KEYWORDS=f,a.ATOMIC_START_TOKEN=G,a.OPERATORS=n,a.is_alphanumeric_char=s,a.is_identifier_char=t}},modules["preprocessors/ehtml"]=module={id:"preprocessors/ehtml",exports:{},block:function(a,b,c,d,e){(function(){"use strict";var b,c,d,e,f,g,h,i,j,k,l;b=__move.runtime,c=b._MoveKWArgsT,d=b.Text,e=b.extend,f=b.create,g=b.print,h=b.repeat,i=b.after,j=b.JSON,__move.EHTML=k=function a(b){b!==null&&typeof b=="object"&&b.__kw===c&&(arguments.keywords=b,b=b.html);var d;a.spawnerElement||(a.spawnerElement=document.createElement("div")),a.spawnerElement.innerHTML=b,d=a.spawnerElement.firstChild,d.toString=function(){return b};return d},k.classNameWrapper=function(b){b!==null&&typeof b=="object"&&b.__kw===c&&(arguments.keywords=b,b=b.className),b=" "+b;return function(a){a!==null&&typeof a=="object"&&a.__kw===c&&(arguments.keywords=a,a=a.html);var d;d=__move.EHTML(a),d.className+=b;return d}},a.process=l=function(b,d){b!==null&&typeof b=="object"&&b.__kw===c&&(arguments.keywords=b,d=b.options,b=b.src);var e,f,g,h,i;e=0,f=function(d){d!==null&&typeof d=="object"&&d.__kw===c&&(arguments.keywords=d,d=d.endch);var f,g;f=null;while(g=b[e++]){if(g===d&&f!=="\\")break;f=g}},g=function(){var d,f,g,i,j,k,l,m;d=0,f=e-1,g="<",i=[];while(g==="<"){j=k=null;while((g=b[e++])&&g!==">")j===null&&(j=g),g==="{"&&k!=="\\"&&(i.push([!0,f,e-1]),f=e,l=h(!0),i.push([!1,l]),f=e),k=g;if(j==="/"){--d;if(d<0)throw Error("EHTML: Premature termination")}else k!=="/"&&++d;if(!g||d===0)break;while((g=b[e++])&&g!=="<")g==="{"&&k!=="\\"&&(i.push([!0,f,e-1]),f=e,l=h(!0),i.push([!1,l]),f=e),k=g}i.push([!0,f,e]),m="",i.forEach(function(a){a!==null&&typeof a=="object"&&a.__kw===c&&(arguments.keywords=a,a=a.range);var d;a[0]?(d=b.substring(a[1],a[2]),d=d.replace(/\n/g,"\\n"),d=d.replace(/\t/g,"\\t"),d=d.replace(/'/g,"\\'")):d="'+("+a[1]+")+'";return m+=d}),m="EHTML('"+m+"')";return m},h=function(d){d!==null&&typeof d=="object"&&d.__kw===c&&(arguments.keywords=d,d=d.isDeep);var h,i,j,k,l,m,n,o,p;h="",i=0,j=1,k=i,l=null,m=1;while(n=b[e++]){o=!1;switch(n){case" ":case"\n":case"\r":case"\t":h+=n;break;case'"':p=e,f('"'),h+=b.substring(p-1,e);break;case"'":p=e,f("'"),h+=b.substring(p-1,e);break;case"<":k===j?(k=i,h+=n):h+=g();break;default:h+=n,o=!0}if(o){if(d&&l!=="\\")if(n==="{")++m;else if(n==="}"&&--m===0){h=h.substr(0,h.length-1);break}n.match(/[a-z0-9_\)\}]/i)?k=j:k=i}l=n}return h},i="EHTML = __move.EHTML\n"+h();return i}})()}},modules.process=module={id:"process",exports:{},block:function(a,b,c,d,e){function H(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function G(a){return/^[a-z_$][a-z0-9_$]*$/i.test(a)&&a!="this"&&!H(f.KEYWORDS_ATOM,a)&&!H(f.RESERVED_WORDS,a)&&!H(f.KEYWORDS,a)}function F(a,b){var c={};a===!0&&(a={});for(var d in b)H(b,d)&&(c[d]=a&&H(a,d)?a[d]:b[d]);return c}function E(a,b){if(b<=0)return"";if(b==1)return a;var c=E(a,b>>1);c+=c,b&1&&(c+=a);return c}function D(a,b){var c=[0];f.parse(function(){function j(){var a=d.apply(this,arguments);out:{if(g&&g.type=="keyword")break out;if(h(a)>b)switch(a.type){case"keyword":case"atom":case"name":case"punc":i(a);break out}}g=a;return a}function i(a){e=a.pos,c.push(e)}function h(a){return a.pos-e}var d=f.tokenizer(a),e=0,g;j.context=function(){return d.context.apply(this,arguments)};return j}());return c.map(function(b,d){return a.substring(b,c[d+1]||a.length)}).join("\n")}function C(a,b){function K(a){if(!!a){var b=a[0],c=t[b];if(!c)throw new Error("Can't find generator for \""+b+'"');J.push(a);var d=c.apply(b,a.slice(1));J.pop();return d}}function D(a){var b=a[0],c=a[1];c!=null&&(b=n([b,"=",K(c)]));return b}function C(a){if(!a)return";";if(a.length==0)return"{}";return"{"+d+m(function(){return y(a).join(d)})+d+l("}")}function z(a){var c=a.length;if(c==0)return"{}";return"{"+d+I(a,function(a,e){var f=a[1].length>0,g=m(function(){return l(a[0]?n(["case",K(a[0])+":"]):"default:")},.5)+(f?d+m(function(){return y(a[1]).join(d)}):"");!b&&f&&e<c-1&&(g+=";");return g}).join(d)+d+l("}")}function y(a){for(var c=[],d=a.length-1,e=0;e<=d;++e){var f=a[e],g=K(f);g!=";"&&(!b&&e==d&&(f[0]=="while"&&v(f[2])||h(f[0],["for","for-in"])&&v(f[4])||f[0]=="if"&&v(f[2])&&!f[3]||f[0]=="if"&&f[3]&&v(f[3])?g=g.replace(/;*\s*$/,";"):g=g.replace(/;+\s*$/,"")),c.push(g))}return I(c,l)}function x(a){return a.toString()}function w(a,c,d,e,f){var g=f||"function";a?g+=" "+x(a):b&&(g+=" "),g+="("+o(I(c,x))+")";return n([g,C(d)])}function u(a){if(a[0]=="do")return K(["block",[a]]);var b=a;for(;;){var c=b[0];if(c=="if"){if(!b[3])return K(["block",[a]]);b=b[3]}else if(c=="while"||c=="do")b=b[2];else if(c=="for"||c=="for-in")b=b[4];else break}return K(a)}function s(a){var b=a.toString(10),c=[b.replace(/^0\./,".")],d;Math.floor(a)===a?(c.push("0x"+a.toString(16).toLowerCase(),"0"+a.toString(8)),(d=/^(.*?)(0+)$/.exec(a))&&c.push(d[1]+"e"+d[2].length)):(d=/^0?\.(0+)(.*)$/.exec(a))&&c.push(d[2]+"e-"+(d[1].length+d[2].length),b.substr(b.indexOf(".")));return q(c)}function r(a){if(a[0]=="function"){var b=g(J),c=b.pop(),d=b.pop();while(d){if(d[0]=="stat")return!0;if(d[0]=="seq"&&d[1]===c||d[0]=="call"&&d[1]===c||d[0]=="binary"&&d[2]===c)c=d,d=b.pop();else return!1}}return!H(A,a[0])}function q(a){if(a.length==1)return a[0];if(a.length==2){var b=a[1];a=a[0];return a.length<=b.length?a:b}return q([a[0],q(a.slice(1))])}function p(a){var b=K(a);for(var c=1;c<arguments.length;++c){var d=arguments[c];if(d instanceof Function&&d(a)||a[0]==d)return"("+b+")"}return b}function o(a){return a.join(","+e)}function n(a){if(b)return a.join(" ");var c=[];for(var d=0;d<a.length;++d){var e=a[d+1];c.push(a[d]),e&&(/[a-z0-9_\x24]$/i.test(a[d].toString())&&/^[a-z0-9_\x24]/i.test(e.toString())||/[\+\-]$/.test(a[d].toString())&&/^[\+\-]/.test(e.toString()))&&c.push(" ")}return c.join("")}function m(a,b){b==null&&(b=1),c+=b;try{return a.apply(null,g(arguments,1))}finally{c-=b}}function l(a){a==null&&(a=""),b&&(a=E(" ",b.indent_start+c*b.indent_level)+a);return a}b&&(b=F(b,{indent_start:0,indent_level:4,quote_keys:!1,space_colon:!1}));var c=0,d=b?"\n":"",e=b?" ":"",t={string:B,num:s,name:x,toplevel:function(a){return y(a).join(d+d)},block:C,"var":function(a){return"var "+o(I(a,D))+";"},"const":function(a){return"const "+o(I(a,D))+";"},"import":function(a){return o(I(a,function(a){var b=a[0],c=b;a.length>1&&(c=a[1][1]);return b+" = require("+K(["string",c])+")"}))+";"},"export":function(a){return o(I(a,function(b){var c=b[0],d=c;b.length>1&&(d=b[1][1]);return"exports."+c+" = "+o(I(a,D))}))+";"},"try":function(a,b,c){var d=["try",C(a)];b&&d.push("catch","("+b[0]+")",C(b[1])),c&&d.push("finally",C(c));return n(d)},"throw":function(a){return n(["throw",K(a)])+";"},"new":function(a,b){b=b.length>0?"("+o(I(b,K))+")":"";return n(["new",p(a,"seq","binary","conditional","assign",function(a){var b=k(),c={};try{b.with_walkers({call:function(){throw c},"function":function(){return this}},function(){b.walk(a)})}catch(d){if(d===c)return!0;throw d}})+b])},"switch":function(a,b){return n(["switch","("+K(a)+")",z(b)])},"break":function(a){var b="break";a!=null&&(b+=" "+x(a));return b+";"},"continue":function(a){var b="continue";a!=null&&(b+=" "+x(a));return b+";"},conditional:function(a,b,c){return n([p(a,"assign","seq","conditional"),"?",p(b,"seq"),":",p(c,"seq")])},assign:function(a,b,c){a&&a!==!0?a+="=":a="=",c||console.log("assign:",a,b,c);return n([K(b),a,p(c,"seq")])},dot:function(a){var b=K(a),c=1;a[0]=="num"?b+=".":r(a)&&(b="("+b+")");while(c<arguments.length)b+="."+x(arguments[c++]);return b},call:function(a,b){var c=K(a);r(a)&&(c="("+c+")");return c+"("+o(I(b,function(a){return p(a,"seq")}))+")"},"function":w,defun:w,"if":function(a,b,c){var d=["if","("+K(a)+")",c?u(b):K(b)];c&&d.push("else",K(c));return n(d)},"for":function(a,b,c,d){var f=["for"];a=(a!=null?K(a):"").replace(/;*\s*$/,";"+e),b=(b!=null?K(b):"").replace(/;*\s*$/,";"+e),c=(c!=null?K(c):"").replace(/;*\s*$/,"");var g=a+b+c;g=="; ; "&&(g=";;"),f.push("("+g+")",K(d));return n(f)},"for-in":function(a,b,c,d){var e=n(["for","("]);a&&(e+="var "),e+=n([x(b)+" in "+K(c)+")",K(d)]);return e},"while":function(a,b){return n(["while","("+K(a)+")",K(b)])},"do":function(a,b){return n(["do",K(b),"while","("+K(a)+")"])+";"},"return":function(a){var b=["return"];a!=null&&b.push(K(a));return n(b)+";"},binary:function(a,b,c){var d=K(b),e=K(c);if(h(b[0],["assign","conditional","seq"])||b[0]=="binary"&&i[a]>i[b[1]])d="("+d+")";if(h(c[0],["assign","conditional","seq"])||c[0]=="binary"&&i[a]>=i[c[1]]&&(c[1]!=a||!h(a,["&&","||","*"])))e="("+e+")";a==="xor"&&(a="^");return n([d,a,e])},"unary-prefix":function(a,b){var c=K(b);b[0]=="num"||b[0]=="unary-prefix"&&!H(j,a+b[1])||!r(b)||(c="("+c+")");return a+(f.is_alphanumeric_char(a.charAt(0))?" ":"")+c},"unary-postfix":function(a,b){var c=K(b);b[0]=="num"||b[0]=="unary-postfix"&&!H(j,a+b[1])||!r(b)||(c="("+c+")");return c+a},sub:function(a,b){var c=K(a);r(a)&&(c="("+c+")");return c+"["+K(b)+"]"},object:function(a){if(a.length==0)return"{}";return"{"+d+m(function(){return I(a,function(a){if(a.length==3)return l(w(a[0],a[1][2],a[1][3],a[1][4],a[2]));var c=a[0],d=K(a[1]);b&&b.quote_keys?c=B(c):(typeof c=="number"||!b&&+c+""==c)&&parseFloat(c)>=0?c=s(+c):G(c)||(c=B(c));return l(n(b&&b.space_colon?[c,":",d]:[c+":",d]))}).join(","+d)})+d+l("}")},regexp:function(a,b){return"/"+a+"/"+b},array:function(a){if(a.length==0)return"[]";return n(["[",o(I(a,function(a){if(!b&&a[0]=="atom"&&a[1]=="undefined")return"";return p(a,"seq")})),"]"])},stat:function(a){return K(a).replace(/;*\s*$/,";")},seq:function(){return o(I(g(arguments),K))},label:function(a,b){return n([x(a),":",K(b)])},"with":function(a,b){return n(["with","("+K(a)+")",K(b)])},atom:function(a){return x(a)}},J=[];return K(a)}function B(a){var b=0,c=0;a=a.replace(/[\\\b\f\n\r\t\x22\x27]/g,function(a){switch(a){case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case'"':++b;return'"';case"'":++c;return"'"}return a});return b>c?"'"+a.replace(/\x27/g,"\\'")+"'":'"'+a.replace(/\x22/g,'\\"')+'"'}function z(a,b){function w(a,b){return x(a,function(a,c){if(!c){y(b);return["block"]}return["for",null,null,null,d(b)]})}function p(a,b,c){a=d(a),b=d(b),c=d(c),v(b)?(a=f(a),b=c,c=null):v(c)?c=null:function(){var d=C(a),e=f(a),g=C(e);if(g.length<d.length){var h=b;b=c,c=h,a=e}}();if(v(c)&&v(b))return["stat",a];var e=["if",a,b,c];b[0]=="if"&&v(b[3])&&v(c)?e=q(e,d(["if",["binary","&&",a,b[1]],b[2]])):b[0]=="stat"?c?c[0]=="stat"&&(e=q(e,["stat",u(a,b[1],c[1])])):e=q(e,["stat",u(a,b[1])]):c&&b[0]==c[0]&&(b[0]=="return"||b[0]=="throw")&&b[1]&&c[1]?e=q(e,[b[0],u(a,b[1],c[1])]):c&&s(b)?(e=[["if",a,b]],c[0]=="block"?c[1]&&(e=e.concat(c[1])):e.push(c),e=d(["block",e])):b&&s(c)&&(e=[["if",f(a),c]],b[0]=="block"?b[1]&&(e=e.concat(b[1])):e.push(b),e=d(["block",e]));return e}function o(a,b,c){return x(a,function(a,d){if(d){y(c);return b}y(b);return c},function(){return p(a,b,c)})}function m(a,c){a=a.reduce(function(a,b){b&&(b[0]=="block"?b[1]&&a.push.apply(a,b[1]):a.push(b));return a},[]),a=function(b,c){a.forEach(function(a){c&&(a[0]=="var"&&c[0]=="var"||a[0]=="const"&&c[0]=="const")?c[1]=c[1].concat(a[1]):(b.push(a),c=a)});return b}([]),b.dead_code&&(a=function(c,d){a.forEach(function(a){d?h(a[0],["function","defun","var","const"])?c.push(a):b.no_warnings||y(a):(c.push(a),h(a[0],["return","throw","break","continue"])&&(d=!0))});return c}([])),b.make_seqs&&(a=function(b,c){a.forEach(function(a){c&&c[0]=="stat"&&a[0]=="stat"?c[1]=["seq",c[1],a[1]]:(b.push(a),c=a)});return b}([])),c=="lambda"&&(a=function(b,c,d){while(b<a.length){d=a[b++];if(d[0]=="if"&&!d[3]){if(d[2][0]=="return"&&d[2][1]==null){c.push(o(f(d[1]),["block",a.slice(b)]));break}var e=r(d[2]);if(e[0]=="return"&&e[1]==null){c.push(o(d[1],["block",d[2][1].slice(0,-1)],["block",a.slice(b)]));break}}c.push(d)}return c}(0,[]));return a}function l(a,b,c,e){return[this[0],a,b,i(c.scope,function(){return m(I(c,d),"lambda")}),e]}function j(a){a!=null&&a[0]=="block"&&a[1]&&(a[1].length==1?a=a[1][0]:a[1].length==0&&(a=["block"]));return a}function i(a,b){var c=e;e=a;var d=b();d.scope=a,e=c;return d}function f(a){var c=["unary-prefix","!",a];switch(a[0]){case"unary-prefix":return a[1]=="!"&&t(a[2])?a[2]:c;case"seq":a=g(a),a[a.length-1]=f(a[a.length-1]);return a;case"conditional":return q(c,["conditional",a[1],f(a[2]),f(a[3])]);case"binary":var d=a[1],e=a[2],h=a[3];if(!b.keep_comps)switch(d){case"<=":return["binary",">",e,h];case"<":return["binary",">=",e,h];case">=":return["binary","<",e,h];case">":return["binary","<=",e,h]}switch(d){case"==":return["binary","!=",e,h];case"!=":return["binary","==",e,h];case"===":return["binary","!==",e,h];case"!==":return["binary","===",e,h];case"&&":return q(c,["binary","||",f(e),f(h)]);case"||":return q(c,["binary","&&",f(e),f(h)])}}return c}b=F(b,{make_seqs:!0,dead_code:!0,keep_comps:!0,no_warnings:!1});var c=k(),d=c.walk,e;return c.with_walkers({sub:function(a,b){if(b[0]=="string"){var c=b[1];if(G(c))return["dot",d(a),c]}},"if":o,toplevel:function(a){return["toplevel",i(this.scope,function(){return m(I(a,d))})]},"switch":function(a,b){var c=b.length-1;return["switch",d(a),I(b,function(a,b){var e=m(I(a[1],d));if(b==c&&e.length>0){var f=e[e.length-1];f[0]=="break"&&!f[1]&&e.pop()}return[a[0]?d(a[0]):null,e]})]},"function":function(){var a=l.apply(this,arguments);a[1]&&!H(e.refs,a[1])&&(a[1]=null);return a},defun:l,block:function(a){if(a)return j(["block",m(I(a,d))])},binary:function(a,b,c){return x(["binary",a,d(b),d(c)],function(b){return q(d(b),this)},function(){return this})},conditional:function(a,b,c){return u(d(a),d(b),d(c))},"try":function(a,b,c){return["try",m(I(a,d)),b!=null?[b[0],m(I(b[1],d))]:null,c!=null?m(I(c,d)):null]},"unary-prefix":function(a,b){b=d(b);var c=["unary-prefix",a,b];a=="!"&&(c=q(c,f(b)));return x(c,function(a,b){return d(a)},function(){return c})},name:function(a){switch(a){case"true":return["unary-prefix","!",["num",0]];case"false":return["unary-prefix","!",["num",1]]}},"new":function(a,b){if(a[0]=="name"&&a[1]=="Array"&&!e.has("Array"))return b.length!=1?["array",b]:["call",["name","Array"],b]},call:function(a,b){if(a[0]=="name"&&a[1]=="Array"&&b.length!=1&&!e.has("Array"))return["array",b]},"while":w,"do":w},function(){return d(n(a))})}function y(a){v(a)||p("Dropping unreachable code: "+C(a,!0))}function w(a){return a[0]=="string"||a[0]=="unary-prefix"&&a[1]=="typeof"||a[0]=="binary"&&a[1]=="+"&&(w(a[2])||w(a[3]))}function v(a){return!a||a[0]=="block"&&(!a[1]||a[1].length==0)}function u(a,b,c){return a[0]=="unary-prefix"&&a[1]=="!"?c?["conditional",a[2],c,b]:["binary","||",a[2],b]:c?["conditional",a,b,c]:["binary","&&",a,b]}function t(a){return a[0]=="unary-prefix"&&h(a[1],["!","delete"])||a[0]=="binary"&&h(a[1],["in","instanceof","==","!=","===","!==","<","<=",">=",">"])||a[0]=="binary"&&h(a[1],["&&","||"])&&t(a[2])&&t(a[3])||a[0]=="conditional"&&t(a[2])&&t(a[3])||a[0]=="assign"&&a[1]===!0&&t(a[3])||a[0]=="seq"&&t(a[a.length-1])}function s(a){if(a){a=r(a);if(a[0]=="return"||a[0]=="break"||a[0]=="continue"||a[0]=="throw")return!0}}function r(a){if(a[0]=="block"&&a[1]&&a[1].length>0)return a[1][a[1].length-1];return a}function q(a,b){return C(a).length>C(b[0]=="stat"?b[1]:b).length?b:a}function o(a,b){function i(a){return[this[0],I(a,function(a){return[f(a[0]),d(a[1])]})]}function h(a,b){var c=e;e=a;for(var d in a.names)H(a.names,d)&&f(d,!0);var g=b();g.scope=a,e=c;return g}function g(a,b,c,e){a&&(a=f(a)),c=h(c.scope,function(){b=I(b,function(a){return f(a)});return I(c,d)});return[this[0],a,b,c,e]}function f(a,c){if(!b&&!e.parent)return a;return e.get_mangled(a,c)}var c=k(),d=c.walk,e;return c.with_walkers({"function":g,defun:function(){var a=g.apply(this,arguments);switch(c.parent()[0]){case"toplevel":case"function":case"defun":return I.at_top(a)}return a},"var":i,"const":i,name:function(a){return[this[0],f(a)]},"try":function(a,b,c){return[this[0],I(a,d),b!=null?[f(b[0]),I(b[1],d)]:null,c!=null?I(c,d):null]},toplevel:function(a){var b=this;return h(b.scope,function(){return[b[0],I(a,d)]})},"for-in":function(a,b,c,e){return[this[0],a,f(b),d(c),d(e)]}},function(){return d(n(a))})}function n(a){function i(a,b,c,e){return[this[0],g(a),b,f(function(){I(b,g);return I(c,d)}),e]}function h(a){b.refs[a]=!0}function g(a){return b.define(a)}function f(a){b=new l(b);var c=b.body=a();c.scope=b,b=b.parent;return c}var b=null,c=k(),d=c.walk,e=[];return f(function(){function j(a,b){for(b=a.children.length;--b>=0;)j(a.children[b]);for(b in a.refs)if(H(a.refs,b))for(var c=a.has(b),d=a;d;d=d.parent){d.refs[b]=c;if(d===c)break}}var f=c.with_walkers({"function":i,defun:i,"with":function(a,c){for(var d=b;d;d=d.parent)d.uses_with=!0},"var":function(a){I(a,function(a){g(a[0])})},"const":function(a){I(a,function(a){g(a[0])})},"try":function(a,b,c){if(b!=null)return[this[0],I(a,d),[g(b[0]),I(b[1],d)],c!=null?I(c,d):null]},name:function(a){a=="eval"&&e.push(b),h(a)},"for-in":function(a,b){a?g(b):h(b)}},function(){return d(a)});I(e,function(a){if(!a.has("eval"))while(a)a.uses_eval=!0,a=a.parent}),j(b);return f})}function l(a){this.names={},this.mangled={},this.rev_mangled={},this.cname=-1,this.refs={},this.uses_with=!1,this.uses_eval=!1,this.parent=a,this.children=[],a?(this.level=a.level+1,a.children.push(this)):this.level=0}function k(a){function h(a,b){var c={},e;for(e in a)H(a,e)&&(c[e]=d[e],d[e]=a[e]);var f=b();for(e in c)H(c,e)&&(c[e]?d[e]=c[e]:delete d[e]);return f}function f(a){if(!a)return null;try{e.push(a);var b=a[0],f=d[b];if(f){var g=f.apply(a,a.slice(1));if(g!=null)return g}f=c[b];return f.apply(a,a.slice(1))}finally{e.pop()}}function b(a){return[this[0],I(a,function(a){var b=[a[0]];a.length>1&&(b[1]=f(a[1]));return b})]}var c={string:function(a){return[this[0],a]},num:function(a){return[this[0],a]},name:function(a){return[this[0],a]},toplevel:function(a){return[this[0],I(a,f)]},block:function(a){var b=[this[0]];a!=null&&b.push(I(a,f));return b},"var":b,"const":b,"import":b,"export":b,"try":function(a,b,c){return[this[0],I(a,f),b!=null?[b[0],I(b[1],f)]:null,c!=null?I(c,f):null]},"throw":function(a){return[this[0],f(a)]},"new":function(a,b){return[this[0],f(a),I(b,f)]},"switch":function(a,b){return[this[0],f(a),I(b,function(a){return[a[0]?f(a[0]):null,I(a[1],f)]})]},"break":function(a){return[this[0],a]},"continue":function(a){return[this[0],a]},conditional:function(a,b,c){return[this[0],f(a),f(b),f(c)]},assign:function(a,b,c){return[this[0],a,f(b),f(c)]},dot:function(a){return[this[0],f(a)].concat(g(arguments,1))},call:function(a,b){return[this[0],f(a),I(b,f)]},"function":function(a,b,c,d){return[this[0],a,b.slice(),I(c,f),d]},defun:function(a,b,c,d){return[this[0],a,b.slice(),I(c,f),d]},"if":function(a,b,c){return[this[0],f(a),f(b),f(c)]},"for":function(a,b,c,d){return[this[0],f(a),f(b),f(c),f(d)]},"for-in":function(a,b,c,d){return a?[this[0],f(a),f(b),f(c),f(d)]:[this[0],a,b,f(c),f(d)]},"while":function(a,b){return[this[0],f(a),f(b)]},"do":function(a,b){return[this[0],f(a),f(b)]},"return":function(a){return[this[0],f(a)]},binary:function(a,b,c){return[this[0],a,f(b),f(c)]},"unary-prefix":function(a,b){return[this[0],a,f(b)]},"unary-postfix":function(a,b){return[this[0],a,f(b)]},sub:function(a,b){return[this[0],f(a),f(b)]},object:function(a){return[this[0],I(a,function(a){return a.length==2?[a[0],f(a[1])]:[a[0],f(a[1]),a[2]]})]},regexp:function(a,b){return[this[0],a,b]},array:function(a){return[this[0],I(a,f)]},stat:function(a){return[this[0],f(a)]},seq:function(){return[this[0]].concat(I(g(arguments),f))},label:function(a,b){return[this[0],a,f(b)]},"with":function(a,b){return[this[0],f(a),f(b)]},atom:function(a){return[this[0],a]}},d={},e=[];return{walk:f,with_walkers:h,parent:function(){return e[e.length-2]},stack:function(){return e}}}var f=b("./parser"),g=f.slice,h=f.member,i=f.PRECEDENCE,j=f.OPERATORS,m=function(){var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_";return function(b){var c="";do c=a.charAt(b%54)+c,b=Math.floor(b/54);while(b>0);return c}}();l.prototype={has:function(a){for(var b=this;b;b=b.parent)if(H(b.names,a))return b},has_mangled:function(a){for(var b=this;b;b=b.parent)if(H(b.rev_mangled,a))return b},toJSON:function(){return{names:this.names,uses_eval:this.uses_eval,uses_with:this.uses_with}},next_mangled:function(){for(;;){var a=m(++this.cname),b;b=this.has_mangled(a);if(b&&this.refs[b.rev_mangled[a]]===b)continue;b=this.has(a);if(b&&b!==this&&this.refs[a]===b&&!b.has_mangled(a))continue;if(H(this.refs,a)&&this.refs[a]==null)continue;if(!G(a))continue;return a}},get_mangled:function(a,b){if(this.uses_eval||this.uses_with)return a;var c=this.has(a);if(!c)return a;if(H(c.mangled,a))return c.mangled[a];if(!b)return a;var d=c.next_mangled();c.rev_mangled[d]=a;return c.mangled[a]=d},define:function(a){if(a!=null)return this.names[a]=a}};var p=function(){},x=function(){function b(c){switch(c[0]){case"string":case"num":return c[1];case"name":case"atom":switch(c[1]){case"true":return!0;case"false":return!1}break;case"unary-prefix":switch(c[1]){case"!":return!b(c[2]);case"typeof":return typeof b(c[2]);case"~":return~b(c[2]);case"-":return-b(c[2]);case"+":return+b(c[2])}break;case"binary":var d=c[2],e=c[3];switch(c[1]){case"&&":return b(d)&&b(e);case"||":return b(d)||b(e);case"|":return b(d)|b(e);case"&":return b(d)&b(e);case"^":return b(d)^b(e);case"+":return b(d)+b(e);case"*":return b(d)*b(e);case"/":return b(d)/b(e);case"-":return b(d)-b(e);case"<<":return b(d)<<b(e);case">>":return b(d)>>b(e);case">>>":return b(d)>>>b(e);case"==":return b(d)==b(e);case"===":return b(d)===b(e);case"!=":return b(d)!=b(e);case"!==":return b(d)!==b(e);case"<":return b(d)<b(e);case"<=":return b(d)<=b(e);case">":return b(d)>b(e);case">=":return b(d)>=b(e);case"in":return b(d)in b(e);case"instanceof":return b(d)instanceof b(e)}}throw a}var a={};return function(c,d,e){try{var f=b(c),g;switch(typeof f){case"string":g=["string",f];break;case"number":g=["num",f];break;case"boolean":g=["name",String(f)];break;default:throw new Error("Can't handle constant of type: "+typeof f)}return d.call(c,g,f)}catch(h){if(h===a){c[0]=="binary"&&(c[1]=="==="||c[1]=="!==")&&(w(c[2])&&w(c[3])||t(c[2])&&t(c[3]))&&(c[1]=c[1].substr(0,2));return e?e.call(c,c):null}throw h}}}(),A=f.array_to_hash(["name","array","string","dot","sub","call","regexp"]),I;(function(){function a(a){this.v=a}I=function(b,c,d){var e=[];for(var f=0;f<b.length;++f){var g=c.call(d,b[f],f);g instanceof a?e.unshift(g.v):e.push(g)}return e},I.at_top=function(b){return new a(b)}})(),a.ast_walker=k,a.ast_mangle=o,a.ast_squeeze=z,a.gen_code=C,a.ast_add_scope=n,a.ast_squeeze_more=b("./squeeze-more").ast_squeeze_more,a.set_logger=function(a){p=a},a.make_string=B,a.split_lines=D,a.MAP=I,a.Scope=l}},modules.runtime=module={id:"runtime",exports:{},block:function(a,b,c,d,e){(function(){"use strict";var c,d,e,f,g,h,i,j,k,l,m,f,g,i,j,n,o,p;c=__move.runtime,d=c._MoveKWArgsT,e=c.Text,f=c.extend,g=c.create,h=c.print,i=c.repeat,j=c.after,k=c.JSON,d=global.__move.runtime._MoveKWArgsT,l=typeof process!="undefined"&&!!(typeof process.versions=="object"&&process.versions.node||process.pid),l||(b("./es5_object"),b("./es5_array"),b("./es5_date"),b("./es5_json")),b("./runtime_string"),b("./runtime_date"),b("./runtime_array"),Object.defineProperty?m=function(b,c,e){b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,e=b.value,c=b.name,b=b.obj);return Object.defineProperty(b,c,{value:e,writable:!1,enumerable:!0,configurable:!1})}:m=function(b,c,e){b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,e=b.value,c=b.name,b=b.obj);return b[c]=e},m(a,"_MoveKWArgsT",d),m(a,"Text",String),String.prototype.toText=String.prototype.toString,a.extend=f=function(b,c){b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,c=b.body,b=b.object);var e;e=c===null?"undefined":typeof c;if(e==="object")Object.keys(c).forEach(function(a){a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,a=a.key);return b[a]=c[a]});else if(e==="function")c.call(b);else if(e!=="undefined")throw new TypeError('"body" argument must be either an object or a function, not a '+e);return b},a.create=g=function(b,c){b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,c=b.body,b=b.prototype);return f(Object.create(b),c)};if(typeof Object.inspect!="function")try{Object.inspect=b("util").inspect;if(typeof Object.inspect!="function")throw 1}catch(q){Object.inspect=b("./runtime_inspect").inspect}typeof console!="undefined"&&console.log?typeof window!="undefined"?a.print=function(){return console.log.apply(console,Array.prototype.slice.call(arguments))}:a.print=console.log:a.print=function(){},a.repeat=i=function(b,c){b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,c=b.block,b=b.times);var e;if(typeof b=="function"){for(;;)if(!b())break}else{if(typeof c!="function")return function(a){a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,a=a.block);if(b!==undefined){for(e=0;e<b;++e)if(a(e)===!0)break}else for(;;)if(!a())break};if(b!==undefined){for(e=0;e<b;++e)if(c(e)===!0)break}else for(;;)if(!c())break}},a.after=j=function(b,c){b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,c=b.date,b=b.delay);if(b){if(typeof b!="number")throw new TypeError('"delay" argument must be a number')}else if(c){if(typeof c=="string"||typeof c=="number"){c=new Date(c);if(isNaN(c.getTime()))throw new Error('Invalid date/time passed for "date" argument')}else if(typeof c!="object"||!(c instanceof Date))throw new TypeError('"date" argument must be a Date object or a string');b=Math.max(0,c.getTime()-(new Date).getTime())}return function(a){a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,a=a.block);return setTimeout(a,b)}},k=global.JSON,n=function(b,c){b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,c=b.parse,b=b.build);if(b)return k.stringify(b);if(c)return k.parse(c);throw new TypeError('Expected either "parse" or "build" argument')},n.parse=k.parse,n.stringify=k.stringify,a.JSON=n,o=function(b,c){b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,c=b.propertyName,b=b.target);var e,f;e=b[c],f=function(b,c){b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,c=b.call,b=b.event);var f;if(c)return e.call(this,b,c);f=this;return function(a){a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,a=a.block);return e.call(f,b,a)}};return b[c]=f};try{p=b("events")}catch(q){}p&&p.EventEmitter&&(o(p.EventEmitter.prototype,"addListener"),p.EventEmitter.prototype.on=p.EventEmitter.prototype.addListener);if(typeof process!="undefined"&&typeof process.on=="function")return o(process,"on")})()}},modules.runtime_array=module={id:"runtime_array",exports:{},block:function(a,b,c,d,e){typeof Array.prototype.unique!="function"&&(Array.prototype.unique=function(){var b=[],c,d,e=this.length;for(c=0;c<e;++c){for(d=c+1;d<e;++d)this[c]===this[d]&&(d=++c);b.push(this[c])}return b});if(typeof Array.prototype._move_setSlice!="function"){var f=Array.prototype.splice;Array.prototype._move_setSlice=function(b,c,d){var e;if(c!==undefined){if(typeof c!="number")throw new TypeError("Second argument must be a number");e=c-b}else e=this.length;return f.apply(this,[b,e].concat(d))}}}},modules.runtime_date=module={id:"runtime_date",exports:{},block:function(a,b,c,d,e){(function(){"use strict";var a,b,c,d,e,f,g,h,i;a=__move.runtime,b=a._MoveKWArgsT,c=a.Text,d=a.extend,e=a.create,f=a.print,g=a.repeat,h=a.after,i=a.JSON,Date.distantFuture===undefined&&(Date.distantFuture=new Date(359753450957352)),Date.distantPast===undefined&&(Date.distantPast=new Date(-621356868e5)),Date.nowUTC||(Date.nowUTC=function(){return(new Date).getUTCTime()}),Date.prototype.getUTCTime||(Date.prototype.getUTCTime=function(){return this.getTime()-this.getTimezoneOffset()});if(!Date.prototype.getUTCComponents)return Date.prototype.getUTCComponents=function(){return[this.getUTCFullYear(),this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds(),this.getUTCMilliseconds()]}})()}},modules.runtime_inspect=module={id:"runtime_inspect",exports:{},block:function(a,b,c,d,e){function h(a){if(a instanceof Date)return!0;if(typeof a!="object")return!1;var b=Date.prototype&&Object.getOwnPropertyNames(Date.prototype),c=a.__proto__&&Object.getOwnPropertyNames(a.__proto__);return JSON.stringify(c)===JSON.stringify(b)}function g(a){var b=""+a;return a instanceof RegExp||typeof a=="function"&&a.constructor.name==="RegExp"&&a.compile&&a.test&&a.exec&&b.match(/^\/.*\/[gim]{0,3}$/)}function f(a){return a instanceof Array||Array.isArray(a)||a&&a!==Object.prototype&&f(a.prototype)}a.inspect=function(b,c,d,e){function k(b,d){if(b&&typeof b.inspect=="function"&&b!==a&&b.inspect!==a.inspect&&(!b.constructor||b.constructor.prototype!==b))return b.inspect(d);switch(typeof b){case"undefined":return j("undefined","undefined");case"string":var e=JSON.stringify(b).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");return j(e,"string");case"number":return j(""+b,"number");case"boolean":return j(""+b,"boolean")}if(b===null)return j("null","null");var l=Object.keys(b),m=c?Object.getOwnPropertyNames(b):l;if(typeof b=="function"&&m.length===0){if(g(b))return j(""+b,"regexp");var n=b.name?": "+b.name:"";return j("[Function"+n+"]","special")}if(h(b)&&m.length===0)return j(b.toUTCString(),"date");var o,p,q;f(b)?(p="Array",q=["[","]"]):(p="Object",q=["{","}"]);if(typeof b=="function"){var r=b.name?": "+b.name:"";o=g(b)?" "+b:" [Function"+r+"]"}else o="";h(b)&&(o=" "+b.toUTCString());if(m.length===0)return q[0]+o+q[1];if(d<0)return g(b)?j(""+b,"regexp"):j("[Object]","special");i.push(b);var s=m.map(function(a){var c,e;b.__lookupGetter__&&(b.__lookupGetter__(a)?b.__lookupSetter__(a)?e=j("[Getter/Setter]","special"):e=j("[Getter]","special"):b.__lookupSetter__(a)&&(e=j("[Setter]","special"))),l.indexOf(a)<0&&(c="["+a+"]"),e||(i.indexOf(b[a])<0?(d===null?e=k(b[a]):e=k(b[a],d-1),e.indexOf("\n")>-1&&(f(b)?e=e.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):e="\n"+e.split("\n").map(function(a){return"   "+a}).join("\n"))):e=j("[Circular]","special"));if(typeof c=="undefined"){if(p==="Array"&&a.match(/^\d+$/))return e;c=JSON.stringify(""+a),c.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(c=c.substr(1,c.length-2),c=j(c,"name")):(c=c.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),c=j(c,"string"))}return c+": "+e});i.pop();var t=0,u=s.reduce(function(a,b){t++,b.indexOf("\n")>=0&&t++;return a+b.length+1},0);u>50?s=q[0]+(o===""?"":o+"\n ")+" "+s.join(",\n  ")+" "+q[1]:s=q[0]+o+" "+s.join(", ")+" "+q[1];return s}var i=[],j=function(a,b){return a};return k(b,typeof d=="undefined"?2:d)}}},modules.runtime_string=module={id:"runtime_string",exports:{},block:function(a,b,c,d,e){String.prototype.repeat||(String.prototype.repeat=function(b){s="";while(b--)s+=this;return s}),String.prototype.padLeft||(String.prototype.padLeft=function(b,c){if(this.length>=b)return this;return String(c||" ").repeat(b-this.length)+this}),String.prototype.padRight||(String.prototype.padRight=function(b,c){if(this.length>=b)return this;return this+String(c||" ").repeat(b-this.length)}),String.prototype.editDistance||(String.prototype.editDistance=function(b){var c,d=(c=this.split("")).length,e=(b=b.split("")).length,f,g,h,i;if(!d&&!e)return Math.max(d,e);for(var j=[],f=d+1;f;j[--f]=[f]);for(f=e+1;j[0][--f]=f;);for(f=-1,h=c.length;++f<h;)for(g=-1,i=b.length;++g<i;)j[(f*=1)+1][(g*=1)+1]=Math.min(j[f][g+1]+1,j[f+1][g]+1,j[f][g]+(c[f]!=b[g]));return j[d][e]}),String.prototype.matchAll||(String.prototype.matchAll=function(b){"use strict";if(!this)throw new TypeError;b instanceof RegExp?b.global||(b=new RegExp(b.source,"g")):b=new RegExp(b,"g");var c,d=[];while(c=b.exec(this))d.push(c);return d}),String.prototype.forEachMatch||(String.prototype.forEachMatch=function(b,c,d){"use strict";if(!this)throw new TypeError;d||(d=this),this.matchAll(b).forEach(c,d);return d}),typeof String.prototype.toLocaleLowerCase=="function"&&(String.prototype.toLowerCase=String.prototype.toLocaleLowerCase),typeof String.prototype.toLocaleUpperCase=="function"&&(String.prototype.toUpperCase=String.prototype.toLocaleUpperCase)}},modules["squeeze-more"]=module={id:"squeeze-more",exports:{},block:function(a,b,c,d,e){function l(a){var b=g.ast_walker(),c=b.walk;return b.with_walkers({call:function(a,b){if(a[0]=="dot"&&a[2]=="toString"&&b.length==0)return["binary","+",a[1],["string",""]]}},function(){return c(a)})}var f=b("./parser"),g=b("./process"),h=f.slice,i=f.member,j=f.PRECEDENCE,k=f.OPERATORS;a.ast_squeeze_more=l}},modules.util=module={id:"util",exports:{},block:function(a,b,c,d,e){a.array_to_hash=function(a){var b={};for(var c=0;c<a.length;++c)b[a[c]]=!0;return b},a.words_to_hash=function(a){return array_to_hash(a.split(" "))},a.string_to_charset=function(a){return array_to_hash(a.split("").map(function(a){return a.charCodeAt(0)}))},a.is_alphanumeric_char=function(a){return a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122},a.is_digit_char=function(a){return a>=48&&a<=57},a.HOP=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.is_substr_eq=function(a,b,c){var d=c.length;while(--d!==-1)if(a.charCodeAt(b+d)!==c.charCodeAt(d))return!1;return!0}}};var move=_require("index");move.runtime._require=_require,move.version=function(){return"0.3.0"};var Require=function(b){function h(a,b,c){typeof b=="function"&&(c=b,b=null);var d={block:c};f(d,"id",String(a)),b&&f(d,"uri",String(b)),g.modules[d.id]=d;return d}function g(a,b){var c=a;a.charAt(0)==="."&&(a=d(a,b));if(!g.modules.hasOwnProperty(a))throw new Error("Module not found "+JSON.stringify(c));var e=g.modules[a];if(e.exports===undefined){var h=function(b){return g(b,a)};f(h,"main",g.main);var i=e.block;delete e.block,e.exports={},g.initFilter&&(i=g.initFilter(i)),i(h,e,e.exports)}return e.exports}function e(a,b){if(!/^\w+:/.test(a)){var d=b.protocol+"//"+b.hostname;b.port&&b.port!==80&&(d+=":"+b.port);var e=b.pathname;a.charAt(0)==="/"?a=d+c(a.split("/")).join("/"):(e+=(e.charAt(e.length-1)==="/"?"":"/../")+a,a=d+c(e.split("/")).join("/"))}return a}function d(a,b){a=a.replace(/\/+$/g,"");return c((b?b+"/../"+a:a).split("/")).join("/")}function c(a,b){var c=a.length,d=Array(c),e=0,f=0,g,h=0,i=c&&a[0]!=="";for(;f<c;++f)g=a[f],g===".."?e>1?--e:i?++h:d[0]="":g!=="."&&(e===0||b||g!=="")&&(d[e++]=g);if(h){d[--h]=d[e-1],e=h+1;while(h--)d[h]=".."}d.length=e;return d}var f;Object.defineProperty?f=function(a,b,c){Object.defineProperty(a,b,{value:c,writable:!1,enumerable:!0,configurable:!1})}:f=function(a,b,c){a[b]=c},g.modules={};var i=h("");delete i.block,i.exports=b||{},f(g,"main",i),g.define=h;return g};move.require=Require(),move.compileScript=function(b,c,d){if(b)throw b;Function(c)()},move.scriptCompilationOptions={preprocess:["ehtml"]};var wrapAsModule=function(b,c,d,e){e||(e=c.replace(/\.[^\.]+$/,""));return"__move.require.define("+JSON.stringify(e)+","+JSON.stringify(d||c)+","+"function(require,module,exports) {"+b+"});\n"};move.runBrowserScripts=function(b,c){var d,e,f,g,h,i=move.scriptCompilationOptions,j=0,k=[],l=0,m=function(){++l},n=function(){if(--l===0){var a=0,b=k.length;for(;a<b;++a)move.compileScript.apply(move,k[a]);typeof c=="function"&&c(null,k)}};g=(b||document).getElementsByTagName("script"),m();for(e=0,f=g.length;e<f;++e)d=g[e],d&&d.type==="text/move"&&function(a,b){m();if(b.src)i.filename=b.src,move.compileURL(b.src,i,function(c,d){d=wrapAsModule(d,b.getAttribute("src"),b.src),k[a]=[c,d,b],n()});else{try{var c=b.getAttribute("module");i.filename="<"+(c||"main")+">",h=move.compile(b.innerHTML,i),c?h=wrapAsModule(h,null,null,c):h="(function(require,module,exports) {"+h+"})(__move.require, {exports:{}}, {});\n",k[a]=[null,h,b]}catch(d){k[a]=[d,null,b]}n()}}(j++,d);n();return null};var _runScripts=function(){move.runBrowserScripts()};window.addEventListener?addEventListener("DOMContentLoaded",_runScripts,!1):attachEvent("onload",_runScripts);return move}();
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
//
// Original at: https://github.com/joyent/node/blob/master/lib/util.js

(function(){

// The maximum length of a line in the stylized output.
var MAX_COLUMNS = 80;

/**
 * Echos the value of a value. Tries to print the value out in the best way
 * possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Boolean} showHidden Flag that shows hidden (not enumerable)
 *    properties of objects.
 * @param {Number} depth Depth in which to descend in object. Default is 2.
 * @param {Boolean} colors Flag to turn on ANSI escape codes to color the
 *    output. Default is false (no coloring).
 */
_inspect = function(obj, showHidden, depth, colors) {
  var seen = [];

  var stylize = function(str, styleType) {
    // http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
    var styles =
        { 'bold' : [1, 22],
          'italic' : [3, 23],
          'underline' : [4, 24],
          'inverse' : [7, 27],
          'white' : [37, 39],
          'grey' : [90, 39],
          'black' : [30, 39],
          'blue' : [34, 39],
          'cyan' : [36, 39],
          'green' : [32, 39],
          'magenta' : [35, 39],
          'red' : [31, 39],
          'yellow' : [33, 39] };

    var style =
        { 'special': 'cyan',
          'number': 'blue',
          'boolean': 'yellow',
          'undefined': 'grey',
          'null': 'bold',
          'string': 'green',
          'date': 'magenta',
          // "name": intentionally not styling
          'regexp': 'red' }[styleType];

    if (style) {
      return '\033[' + styles[style][0] + 'm' + str +
             '\033[' + styles[style][1] + 'm';
    } else {
      return str;
    }
  };
  if (! colors) {
    stylize = function(str, styleType) { return str; };
  }

  function format(value, recurseTimes) {
    // Primitive types cannot have properties
    switch (typeof value) {
      case 'undefined':
        return stylize('undefined', 'undefined');

      case 'string':
        var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                                 .replace(/'/g, "\\'")
                                                 .replace(/\\"/g, '"') + '\'';
        return stylize(simple, 'string');

      case 'number':
        return stylize('' + value, 'number');

      case 'boolean':
        return stylize('' + value, 'boolean');
    }
    // For some reason typeof null is "object", so special case here.
    if (value === null) {
      return stylize('null', 'null');
    }

    // Look up the keys of the object.
    var visible_keys = Object.keys(value);
    var keys = showHidden ? Object.getOwnPropertyNames(value) : visible_keys;

    // Functions without properties can be shortcutted.
    if (typeof value === 'function' && keys.length === 0) {
      if (isRegExp(value)) {
        return stylize('' + value, 'regexp');
      } else {
        var name = value.name ? ': ' + value.name : '';
        return stylize('[Function' + name + ']', 'special');
      }
    }

    // Dates without properties can be shortcutted
    if (isDate(value) && keys.length === 0) {
      return stylize(value.toUTCString(), 'date');
    }

    var base, type, braces;
    // Determine the object type
    if (isArray(value)) {
      type = 'Array';
      braces = ['[', ']'];
    } else {
      type = 'Object';
      braces = ['{', '}'];
    }

    // Make functions say that they are functions
    if (typeof value === 'function') {
      var n = value.name ? ': ' + value.name : '';
      base = (isRegExp(value)) ? ' ' + value : ' [Function' + n + ']';
    } else {
      base = '';
    }

    // Make dates with properties first say the date
    if (isDate(value)) {
      base = ' ' + value.toUTCString();
    }

    if (keys.length === 0) {
      return braces[0] + base + braces[1];
    }

    if (recurseTimes < 0) {
      if (isRegExp(value)) {
        return stylize('' + value, 'regexp');
      } else {
        return stylize('[Object]', 'special');
      }
    }

    seen.push(value);

    var output = keys.map(function(key) {
      var name, str;
      if (value.__lookupGetter__) {
        if (value.__lookupGetter__(key)) {
          if (value.__lookupSetter__(key)) {
            str = stylize('[Getter/Setter]', 'special');
          } else {
            str = stylize('[Getter]', 'special');
          }
        } else {
          if (value.__lookupSetter__(key)) {
            str = stylize('[Setter]', 'special');
          }
        }
      }
      if (visible_keys.indexOf(key) < 0) {
        name = '[' + key + ']';
      }
      if (!str) {
        if (seen.indexOf(value[key]) < 0) {
          if (recurseTimes === null) {
            str = format(value[key]);
          } else {
            str = format(value[key], recurseTimes - 1);
          }
          if (str.indexOf('\n') > -1) {
            if (isArray(value)) {
              str = str.split('\n').map(function(line) {
                return '  ' + line;
              }).join('\n').substr(2);
            } else {
              str = '\n' + str.split('\n').map(function(line) {
                return '   ' + line;
              }).join('\n');
            }
          }
        } else {
          str = stylize('[Circular]', 'special');
        }
      }
      if (typeof name === 'undefined') {
        if (type === 'Array' && key.match(/^\d+$/)) {
          return str;
        }
        name = JSON.stringify('' + key);
        if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
          name = name.substr(1, name.length - 2);
          name = stylize(name, 'name');
        } else {
          name = name.replace(/'/g, "\\'")
                     .replace(/\\"/g, '"')
                     .replace(/(^"|"$)/g, "'");
          name = stylize(name, 'string');
        }
      }

      return name + ': ' + str;
    });

    seen.pop();

    var numLinesEst = 0;
    var length = output.reduce(function(prev, cur) {
      numLinesEst++;
      if (cur.indexOf('\n') >= 0) numLinesEst++;
      return prev + cur.length + 1;
    }, 0);

    if (length > MAX_COLUMNS) {
      output = braces[0] +
               (base === '' ? '' : base + '\n ') +
               ' ' +
               output.join(',\n  ') +
               ' ' +
               braces[1];

    } else {
      output = braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
    }

    return output;
  }
  return format(obj, (typeof depth === 'undefined' ? 2 : depth));
};

function isArray(ar) {
  return ar instanceof Array ||
         Array.isArray(ar) ||
         (ar && ar !== Object.prototype && isArray(ar.__proto__));
}

function isRegExp(re) {
  var s = '' + re;
  return re instanceof RegExp || // easy case
         // duck-type for context-switching evalcx case
         typeof(re) === 'function' &&
         re.constructor.name === 'RegExp' &&
         re.compile &&
         re.test &&
         re.exec &&
         s.match(/^\/.*\/[gim]{0,3}$/);
}

function isDate(d) {
  if (d instanceof Date) return true;
  if (typeof d !== 'object') return false;
  var properties = Date.prototype && Object.getOwnPropertyNames(Date.prototype);
  var proto = d.__proto__ && Object.getOwnPropertyNames(d.__proto__);
  return JSON.stringify(proto) === JSON.stringify(properties);
}

var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}

})();
